<html>
<head>
  <title>chap6Linux的文件权限与目录配置</title>
  <basefont face="微软雅黑" size="2">
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8">
  <meta name="exporter-version" content="Evernote Windows/274507; Windows/6.3.9600;">
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="308">
<h1>chap6Linux的文件权限与目录配置</h1>

<div>
<div style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><ul><li>用户身份</li><li style="list-style: none; display: inline"><ul><li>文件所有者</li><li>用户组</li><li style="list-style: none; display: inline"><ul><li>每个账号都可以有多个用户组支持</li></ul></li><li>其他人</li><li>用户身份与用户组记录的相关文件</li><li style="list-style: none; display: inline"><ul><li>账号信息一般记录在/ect/passwd文件内</li><li>个人密码一般记录在/ect/shadow文件内</li><li>用户组组名一般记录在/ect/group文件内</li></ul></li></ul></li><li>文件权限</li><li style="list-style: none; display: inline"><ul><li>当屏幕出现“Permission Deny”时，肯定是权限设置错误</li><li>文件属性</li><li style="list-style: none; display: inline"><ul><li>可以利用ls命令查看目录下的文件及其属性</li><li>如：-rw-r--r-- 1 root root 42304 Sep 4 18:26 install.log</li><li>第一个列表共10个字符表示文件类型及其权限</li><li style="list-style: none; display: inline"><ul><li>第一个字符代表哦文件类型</li><li style="list-style: none; display: inline"><ul><li>[d]代表目录文件</li><li>[-]代表文件一般文件</li><li>[l]代表连接文件（linkfile）</li><li>[b]代表设备文件中的可存储接口设备，如硬盘</li><li>[c]代表设备文件中的串行端口设备，如键盘、鼠标</li></ul></li><li>剩下九个字符每三个一组，分别为文件所有者、用户组、其他人对该文件的权限</li><li style="list-style: none; display: inline"><ul><li>[r]即read，表示可以读取文件的内容   或者   目录的文件列表</li><li>[w]即write，表示可以编辑修改文件内容   或者   目录下的文件名甚至创建、删除文件</li><li>[x]即execute，表示文件可被执行   或者   目录可被访问（作为工作目录）</li><li>[-]即表示不具有对应的权限</li></ul></li></ul></li><li>第二个列表表示有多少文件名连接到此节点（i-node）</li><li>第三个列表表示所有者</li><li>第四个列表表示所属的用户组</li><li>第五个列表表示容量大小，默认单位为B（byte）</li><li>第六个列表表示创建时间   或者   最后修改时间</li><li style="list-style: none; display: inline"><ul><li>若为当年，则显示格式为    月/日/时间</li><li>若为往年，则显示格式为    月/日/年</li><li style="list-style: none; display: inline"><ul><li>若要完整显示，可以使用“ls -l --full-time”命令即可显示具体的年月日时间</li></ul></li></ul></li><li>第七个列表表示文件名</li><li style="list-style: none; display: inline"><ul><li>若文件名以“.”为前缀，则代表“隐藏文件”</li></ul></li></ul></li><li>权限的重要性</li><li style="list-style: none; display: inline"><ul><li>系统保护</li><li>团队开发软件或者数据共享</li></ul></li><li>文件属性与权限的修改</li><li style="list-style: none; display: inline"><ul><li>改变所属用户组：chgrp</li><li style="list-style: none; display: inline"><ul><li>全称“change group”</li><li>要被改变的组名必须在/ect/group文件内存在才行，否则会显示错误</li><li>基本语法：chgrp [-R] groupname dirname/filename</li><li style="list-style: none; display: inline"><ul><li>-R：表示进行递归（recursive）的持续更改，即连同子目录下的所有文件、目录</li><li>如：chgrp users install.log表示将文件install.log所属的用户组修改为users</li></ul></li></ul></li><li>改变文件所有者：chown</li><li style="list-style: none; display: inline"><ul><li>全称“change owner”</li><li>不仅可以修改文件所有者，也可以修改所属用户组</li><li>用户名必须在/ect/passwd文件中存在的才行</li><li>基本语法：chown [-R] username:groupname dirname/filename</li><li style="list-style: none; display: inline"><ul><li>-R：递归</li><li>如：chown root:root install.log表示将文件install.log所有者和用户组修改为root</li><li style="list-style: none; display: inline"><ul><li>chown root install.log表示只修改所有者</li><li>chown :root install.log表示只修改所属用户组</li></ul></li><li>此处用户名和用户组名之间也可以用“.”，但是账号中可能会出现“.”，可能会造成系统误判，应尽量避免</li></ul></li><li>文件复制：cp命令（copy）</li><li style="list-style: none; display: inline"><ul><li>基本语法：cp 源文件 目标文件</li><li style="list-style: none; display: inline"><ul><li>如：cp file1 file2表示将file1复制为file2</li></ul></li><li>cp命令会复制执行者的属性与权限</li><li>所以复制文件后要注意修改文件的属性与权限</li></ul></li></ul></li><li>改变权限：chmod</li><li style="list-style: none; display: inline"><ul><li>修改方式有两种——</li><li>1、数字法</li><li style="list-style: none; display: inline"><ul><li>基本语法：chmod [-R] xyz dirname/filename</li><li style="list-style: none; display: inline"><ul><li>x、y、z分别代表所有者、用户组、其他人的权限代码</li><li>代码的确定：</li><li style="list-style: none; display: inline"><ul><li>权限分数：r为4，w为2，x为1</li><li>代码为权限分数之和</li><li style="list-style: none; display: inline"><ul><li>如7代表rwx，6代表rw-，3代表-wx，以此类推</li></ul></li></ul></li><li>如：chmod 777 .bashrc表示将文件.bashrc的权限修改为rwxrwxrwx</li></ul></li></ul></li><li>2、符号法</li><li style="list-style: none; display: inline"><ul><li>基本语法：chmod [u,g,o,a] [+,-,=] [r,w,x] dirname/filename</li><li style="list-style: none; display: inline"><ul><li>u即user，g即group，o即others，a即all</li><li>+即加入，-即除去，=即设置</li><li style="list-style: none; display: inline"><ul><li>+-对于未指定的权限不作修改</li><li>=对于未指定的权限设置为-</li></ul></li><li>r即read，w即write，x即execute，不给予的权限无需-</li><li>如：chmod u=rwx,go=rx .bashrc</li><li style="list-style: none; display: inline"><ul><li>u,g,o的设置可以用逗号,隔开</li><li>采用相同设置时可以写在一块儿，如go=rx</li></ul></li></ul></li></ul></li><li>文件在传送过程中，文件的属性、权限有可能会被改变，需要我们手动修改</li></ul></li></ul></li><li>目录与文件的权限意义</li><li style="list-style: none; display: inline"><ul><li>文件（权限体现在“文件内容”）</li><li style="list-style: none; display: inline"><ul><li>文件是实际含有数据的地方，包括一般文本文件、数据库内容文件、二进制可执行文件（binary program）等</li><li>r（read）：可读取此文件的实际内容，如读取文本文件的文字内容</li><li>w（write）：可以编辑、新增或是修改该文件的内容（但不能删除文件）</li><li>x（execute）：该文件具有可以被系统执行的权限，但能否执行成功与文件内容有关</li><li style="list-style: none; display: inline"><ul><li>windows下的执行权限是以扩展名如.exe, .bat, .com等来体现的</li><li>linux下的执行权限是由是否具有“x”权限来体现的</li></ul></li></ul></li><li>目录（权利体现在“文件名”）</li><li style="list-style: none; display: inline"><ul><li>目录主要的内容是记录文件名列表，文件名与目录有强烈的关联</li><li>r（read contents in directory）</li><li style="list-style: none; display: inline"><ul><li>表示具有读取目录结构列表的权限，即能用ls命令获取目录下的文件名数据</li></ul></li><li>w（modify contents of directory）</li><li style="list-style: none; display: inline"><ul><li>表示具有更改该目录结构列表的权限，包括</li><li>新建新的文件和目录</li><li>删除已经存在的文件与目录（与文件权限无关）</li><li>将已存在的文件或目录重命名</li><li>转移该目录内的文件、目录的位置</li></ul></li><li>x（access directory）</li><li style="list-style: none; display: inline"><ul><li>表示具有进入该目录，将其作为工作目录的权限</li><li>工作目录即为当前目录，可以用cd命令来跳转</li><li>注意：仅有r权限，没有x权限，只能查询到目录下的文件名，但不能进入该目录</li></ul></li><li>要开放目录给人浏览时，至少应给予r和x权限，而w权限不应随便给出</li></ul></li></ul></li></ul></li><li>修改系统默认语言</li><li style="list-style: none; display: inline"><ul><li>修改系统配置文件“/ect/sysconfig/i18n”</li><li>将LANG变量值改为en_US等即可</li></ul></li><li>文件类型</li><li style="list-style: none; display: inline"><ul><li>普通文件（regular file）[-]</li><li style="list-style: none; display: inline"><ul><li>纯文本文件（ASCII）</li><li style="list-style: none; display: inline"><ul><li>Linux系统中最多的一种文件类型</li><li>其内容为可以直接读取到的数据</li><li>可以用cat命令将一个文件的内容直接读出</li><li style="list-style: none; display: inline"><ul><li>如：cat aaa.txt</li></ul></li></ul></li><li>二进制文件（binary）</li><li style="list-style: none; display: inline"><ul><li>系统仅可以认识和执行二进制文件（binary file）</li><li>Linux下的可执行文件（除了scripts、文字批处理文件）就是这种格式的</li></ul></li><li>数据格式文件（data）</li><li style="list-style: none; display: inline"><ul><li>某些程序运行中读取的数据文件</li><li>可以用last命令将一个文件的内容读出</li><li style="list-style: none; display: inline"><ul><li>如：last /var/log/wtmp</li></ul></li></ul></li></ul></li><li>目录文件（directory）[d]</li><li>连接文件（link）[l]</li><li style="list-style: none; display: inline"><ul><li>类似windows下的快捷方式</li></ul></li><li>设备与设备文件（device）</li><li style="list-style: none; display: inline"><ul><li>与系统外设及存储等相关的一些文件，通常集中在/dev目录下，分为以下两种：</li><li>1、块（block）设备文件[b]</li><li style="list-style: none; display: inline"><ul><li>存储数据，以提供系统随机访问的接口设备</li><li>例如硬盘、软盘</li></ul></li><li>2、字符（character）设备文件[c]</li><li style="list-style: none; display: inline"><ul><li>串行端口的接口设备</li><li>例如键盘、鼠标等</li><li>特征是“一次性读取”，不能够截断输出</li></ul></li></ul></li><li>套接字（sockets）[s]</li><li style="list-style: none; display: inline"><ul><li>被称为数据接口文件，通常被用在网络上的数据连接</li><li>我们可以启动一个程序来监听客户端的请求，客户端可以通过这个socket来进行数据的通信</li></ul></li><li>管道（FIFO, pipe）[p]</li><li style="list-style: none; display: inline"><ul><li>主要用于解决多个程序同时访问一个文件所造成的错误问题</li><li>FIFO全称first-in-first-out</li></ul></li></ul></li><li>Linux文件名长度限制</li><li style="list-style: none; display: inline"><ul><li>文件名、目录名的最大限制为255（2^8-1）字符</li><li>完整路径的最大限制为4096（2^12）个字符</li><li>Linux命名习惯与windows不同，我们需要一看就知道文件的作用是什么，所以我们的文件名通常很长，引用时巧妙借助[Tab]进行补全即可</li><li>命名限制</li><li style="list-style: none; display: inline"><ul><li>尽量避开特殊字符，如* ? &gt; &lt; ; &amp; ! [ ] | \ ' &quot; ` ( ) { } </li><li>另外，小数点“.”表示隐藏文件</li><li>而参数时常用到+-，命名时开头应尽量避开</li></ul></li></ul></li><li>Linux目录配置</li><li style="list-style: none; display: inline"><ul><li>配置标准：Filesystem Hierarchy Standard（FHS）</li><li style="list-style: none; display: inline"><ul><li>根据文件目录是否可变动、是否可分享划分</li><li>仅对以下三个目录进行了定义</li><li style="list-style: none; display: inline"><ul><li>/（root, 根目录）：与开机系统有关</li><li>/usr（UNIX software resource）：与软件安装/执行有关</li><li>/var（variable）：与系统运作过程有关</li></ul></li></ul></li><li>根目录（/）</li><li style="list-style: none; display: inline"><ul><li>不仅所有目录都是由根目录衍生出来的，而且与开机、还原、系统修复等操作有关</li><li>系统出错时，根目录也必须要包含有能够修复文件系统的程序</li><li>所以FHS希望，根目录不要放在非常大的分区（因为分区越大放入的数据越多，发生错误的机会越大）</li><li>FHS建议，根目录所在分区应该越小越好，且应用程序所安装的软件最好不要与根目录放在同一个分区内，保持根目录越小越好。如此不但性能较好，根目录所在的文件系统也较不容易发生问题</li><li>根目录（/）下常见子目录如下：</li><li style="list-style: none; display: inline"><ul><li>/bin：放置在单用户维护模式下还能被操作的命令</li><li>/boot：主要放置开机会用到的文件</li><li>/dev：任何设备与接口设备都是以文件的形式存在于这个目录中</li><li>/etc：系统的主要配置文件几乎都在该目录下</li><li style="list-style: none; display: inline"><ul><li>FHS建议，不要放置可执行文件在此目录中</li></ul></li><li>/home：系统默认的用户主文件夹（home directory）</li><li style="list-style: none; display: inline"><ul><li>主文件夹有以下两种代号</li><li>1、~：代表当前用户的主文件夹</li><li>2、~zk：代表用户zk的主文件夹</li></ul></li><li>/lib：放置的是开机时会用到的函数，以及在/bin或/sbin下面命令会调用的函数库</li><li>/media：放置的是可删除设备，包括软盘、光盘、DVD等设备都暂时挂载于此</li><li>/mnt：挂载某些额外设备</li><li>/opt：第三方软件放置的目录</li><li>/root：系统管理员的主文件夹</li><li style="list-style: none; display: inline"><ul><li>/root并不在/home/目录下，原因是在进入单用户维护模式而仅挂载根目录时就拥有root的主文件夹，操作方便</li></ul></li><li>/sbin：开机过程所需要的，包括开机、修复、还原系统所需要的命令，这些命令只有root用户能够直接使用！！</li><li>/srv：可视为“service”的缩写，是一些网络服务启动后，所需要取用的数据目录</li><li>/tmp：一般用户或者是正在执行的程序暂时放置文件的地方</li><li style="list-style: none; display: inline"><ul><li>FHS建议开机时，应该将该目录下的数据都删除</li></ul></li><li>以下为FHS没有定义，但是也非常重要的目录：</li><li style="list-style: none; display: inline"><ul><li>/lost+found：当文件系统发生错误时，将一些丢失的片段放置到该目录下</li><li>/proc：该目录本身是一个虚拟的文件系统，放置的数据都在内存中而不占任何硬盘空间</li><li>/sys：也是一个虚拟的文件系统，主要记录与内核相关的信息，包括目前已加载的内核模块与内核检测到的硬件设备信息等，并不占任何硬盘空间</li></ul></li><li>开机过程中只用有目录会被挂载，其他分区都是在开机完成后才陆续进行挂载行为</li><li>以下五个目录必须必须必须放在与根目录同分区下</li><li style="list-style: none; display: inline"><ul><li>/etc：配置文件</li><li>/bin：重要执行文件</li><li>/dev：所需要的设备文件</li><li>/lib：执行文件所需的函数库与内核所需的模块</li><li>/sbin：重要的系统执行文件</li></ul></li></ul></li></ul></li><li>/usr：可分享、不可变动</li><li style="list-style: none; display: inline"><ul><li>usr是UNIX Software Resource的缩写，意为“UNIX操作系统软件资源”</li><li>所有系统默认的软件都会放置在该目录下</li><li>类似于windows的c:\windows\和c:\program files\这两个目录的综合</li><li>系统刚安装完毕时，这个目录会占用最多的硬盘容量</li><li>常见子目录如下：</li><li style="list-style: none; display: inline"><ul><li>/usr/X11R6/：为X Window系统重要数据放置的目录，11表示X版本为第11版，6表示该版的第6次释出</li><li>/usr/bin/：绝大部分用户可使用命令都在于此</li><li style="list-style: none; display: inline"><ul><li>而/bin目录下的命令不同，与开机过程有关</li></ul></li><li>/usr/include/：C/C++等程序语言的头文件（header）与包含文件（include）放置于此</li><li>/usr/lib/：包含各应用软件的函数库、目标文件（object file），以及一般用户惯用的执行文件或脚本（script）</li><li style="list-style: none; display: inline"><ul><li>如果使用的是X86_64的系统，那可能会有/usr/lib64/目录的产生</li></ul></li><li>/usr/local/：系统管理员在本机自行安装的软件，建议安装到此目录下，这样比较便于管理</li><li>/usr/sbin/：非系统正常运行所需要的系统命令</li><li>/usr/share/：放置共享文件的地方，几乎都是文本文件，此目录下常见有以下子目录：</li><li style="list-style: none; display: inline"><ul><li>/usr/share/man：在线帮助文件</li><li>/usr/share/doc：软件杂项的文件说明</li><li>/usr/share/zoneinfo：与时区有关的时区文件</li></ul></li><li>/usr/src/：即source，一般源码建议放置在此</li></ul></li></ul></li><li>/var</li><li style="list-style: none; display: inline"><ul><li>该目录在系统运行后才会渐渐占用硬盘容量空间</li><li>该目录主要针对常态性变动的文件，包括缓存（cache）、登录文件（log file）以及某些软件运行所产生的文件，包括程序文件（lock file, run file）或者例如MySQL数据库文件等</li><li>常见子目录如下：</li><li style="list-style: none; display: inline"><ul><li>/var/cache/：应用程序本身运行过程中产生的一些暂存文件</li><li>/var/lib/：程序本身执行过程中，需要使用到的数据文件放置的目录</li><li style="list-style: none; display: inline"><ul><li>该目录下各自的程序有各自的子目录</li></ul></li><li>/var/lock/：给某些只能被单一应用程序使用的设备或者文件资源上锁，确保该设备只会给单一软件所使用</li><li>/var/log/：这是登录文件放置的目录</li><li>/var/mail/：放置个人电子邮件信箱的目录</li><li style="list-style: none; display: inline"><ul><li>该目录与/var/spool/mail/目录互为连接文件</li></ul></li><li>/var/run/：某些程序或是服务启动后，会将他们的PID放置在该目录下</li><li>/var/spool/：通常放置一些队列数据，“队列”就是排队等待其他程序使用的数据，这些数据在使用后通常会删除</li></ul></li></ul></li></ul></li><li>目录树（directory tree）</li><li style="list-style: none; display: inline"><ul><li>特性</li><li style="list-style: none; display: inline"><ul><li>目录树的起始点为根目录（/， root）</li><li>每一个目录不只能使用本地端的文件系统，也可以使用网络上的文件系统</li><li>每一个文件在此目录树中的文件名（包含完整路径）都是独一无二的</li></ul></li><li>根目录下有一个/selinux的特殊目录</li><li style="list-style: none; display: inline"><ul><li>该目录内容也是内存中的数据，不占用硬盘空间</li><li>该目录是Secure Enhance Linux（SELinux）的执行目录</li></ul></li><li>根据FHS定义，/var应独立出来，这样对于系统数据还有一些安全性保护，因为/var死掉时，根目录还活着，能够进入救援模式</li></ul></li><li>绝对路径与相对路径</li><li style="list-style: none; display: inline"><ul><li>路径（path）分为绝对路径（absolute）与相对路径（relative）</li><li style="list-style: none; display: inline"><ul><li>绝对路径：由根目录（/）开始写起的文件名或目录名称</li><li>相对路径：相对于当前路径的写法</li><li style="list-style: none; display: inline"><ul><li>.：代表当前目录，也可以用 ./ 来表示</li><li>..：代表上一层目录，也可以用 ../ 来表示</li></ul></li></ul></li></ul></li><li>版本查看</li><li style="list-style: none; display: inline"><ul><li>查看Linux内核版本</li><li style="list-style: none; display: inline"><ul><li>uname -r命令</li></ul></li><li>查看其它版本信息</li><li style="list-style: none; display: inline"><ul><li>lsb release -a命令</li></ul></li></ul></li></ul></div>
</div></a></body></html>\00
