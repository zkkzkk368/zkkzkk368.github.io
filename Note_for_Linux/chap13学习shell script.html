
<html>
<head>
  <title>Evernote Export</title>
  <basefont face="微软雅黑" size="2">
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8">
  <meta name="exporter-version" content="Evernote Windows/274507; Windows/6.3.9600;">
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="429">

<div>
<div style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><ul><li>地位，作用</li><li style="list-style: none; display: inline"><ul><li>用于系统管理</li><li>但是速度较慢，不适合大数据计算</li></ul></li><li>注意事项</li><li style="list-style: none; display: inline"><ul><li>当shell script读取到一个Enter符号（CR）即尝试执行该命令</li><li>可以通过反斜杠转义回车来扩展到下一行</li><li>用#开头作为批注</li></ul></li><li>执行方式</li><li style="list-style: none; display: inline"><ul><li>直接命令执行（绝对路径、相对路径、借助PATH变量）</li><li style="list-style: none; display: inline"><ul><li>需要有rx权限</li></ul></li><li>以bash进程来执行（bash shell.sh  或  sh shell.sh）</li><li style="list-style: none; display: inline"><ul><li>只需要r权限</li><li>会使用一个新的bash进程（子进程）</li></ul></li><li>利用source命令来执行</li><li style="list-style: none; display: inline"><ul><li>source shell.sh</li><li>会在父进程中执行</li></ul></li></ul></li><li>书写规范</li><li style="list-style: none; display: inline"><ul><li>第一行以#!/bin/bash声明该script所用的shell</li><li>设置好一些重要的环境变量如PATH何LANG，这样可以直接执行外部命令而无需写绝对路径</li><li>文件头注释包括</li><li style="list-style: none; display: inline"><ul><li>功能</li><li>版本信息</li><li>作者与联系方式</li><li>版权声明方式</li><li>history</li></ul></li></ul></li><li>用exit命令退出程序，并回传一个值（成功运行为0）</li><li>数值运算</li><li style="list-style: none; display: inline"><ul><li>$((............))</li><li>如：echo $(( 13 % 3 ))</li></ul></li><li>test命令</li><li style="list-style: none; display: inline"><ul><li>关于文件名的文件类型判断：test -e filename等</li><li style="list-style: none; display: inline"><ul><li>-e：（常用）文件是否存在</li><li>-f：（常用）是否存在且为文件</li><li>-d：（常用）是否存在且为目录</li><li>-b、-c、-S、-p、-L：略</li></ul></li><li>关于文件的权限检测：test -r filename等</li><li style="list-style: none; display: inline"><ul><li>-r：文件是否存在且有r权限</li><li>-w：文件是否存在且有w权限</li><li>-x：文件是否存在且有x权限</li><li>-u：文件是否存在且有SUID属性</li><li>-g：文件是否存在且有GUID属性</li><li>-k：文件是否存在且有Sticky bit属性</li><li>-s：文件是否存在且非空白文件</li></ul></li><li>文件比较：test file1 -nt file2等</li><li style="list-style: none; display: inline"><ul><li>-nt：（newer than）file1是否比file2新</li><li>-ot：（older than）file1是否比file2旧</li><li>-ef：file1和file2是否为同一文件（相同inode）</li></ul></li><li>整数间判定：test n1 -eq n2等</li><li style="list-style: none; display: inline"><ul><li>-eq：（equal）相等</li><li>-ne：（not equal）不相等</li><li>-gt：（greater than）大于</li><li>-lt：（less than）小于</li><li>-ge：（greater than or equal）大于等于</li><li>-le：（less than or equal）小于等于</li></ul></li><li>字符串间的判定：</li><li style="list-style: none; display: inline"><ul><li>test -z string：是否为空字符串</li><li>test -n string：是否为非空字符串</li><li style="list-style: none; display: inline"><ul><li>（-n可以省略，直接test string）</li></ul></li><li>test str1 = str2：是否相等</li><li>test str1 != str2：是否不相等</li></ul></li><li>多重条件判定：test -r filename -a -x filename等</li><li style="list-style: none; display: inline"><ul><li>-a：（and）</li><li>-o：（or）</li><li>!：（not）</li></ul></li></ul></li><li>判断式</li><li style="list-style: none; display: inline"><ul><li>省略了test，直接把参数放到中括号[]中</li><li style="list-style: none; display: inline"><ul><li>如：test -z &quot;$HOME&quot;</li><li>      [ -z &quot;$HOME&quot; ];</li></ul></li><li>注意：</li><li style="list-style: none; display: inline"><ul><li>中括号内侧两端必须用空格隔开，和通配符和正则表达式作区分</li><li>变量最好用双引号&quot;&quot;包含</li><li>常量最好用单或双引号包含</li><li>否则：</li><li style="list-style: none; display: inline"><ul><li>name=&quot;VBird Tsai&quot;</li><li>[ $name == &quot;VBird&quot; ] 相当于 [ VBird Tsai == &quot;VBird&quot; ]</li></ul></li></ul></li></ul></li><li>默认变量</li><li style="list-style: none; display: inline"><ul><li>如执行sh：/path/to/scriptname opt1 opt2 opt3 opt4</li><li style="list-style: none; display: inline"><ul><li>那么$0代表了/path/to/scriptname即sh文件的路径</li><li>$1,$2,$3,$4代表了opt1,opt2,opt3,opt4</li></ul></li><li>$#：参数个数</li><li>$@：所有参数（空格隔开）</li><li>$*：代表字符串&quot;$1c$2c$3c$4&quot;，其中c为分隔符，默认为空格</li><li> </li><li>shift语句：变量号码偏移</li><li style="list-style: none; display: inline"><ul><li>不带参数：变量号码左移1，即减1</li><li>带参数n：变量号码左移n，即减n</li><li>左移会舍弃左边的参数，如shift会舍弃原来的$1</li></ul></li></ul></li><li>条件判别式</li><li style="list-style: none; display: inline"><ul><li>形式</li><li style="list-style: none; display: inline"><ul><li>if [ 条件判别式 ]; then</li><li>............</li><li>fi</li></ul></li><li>可以有多个条件判别式，之间可以使用逻辑连接符</li><li style="list-style: none; display: inline"><ul><li>&amp;&amp;</li><li>||</li></ul></li><li>多重判断</li><li style="list-style: none; display: inline"><ul><li>if [ 条件判别式 ]; then</li><li>.............</li><li>elif [ 条件判别式 ]; then</li><li>............</li><li>else</li><li>.............</li><li>fi</li><li> </li><li style="list-style: none; display: inline"><ul><li>注意：elif后面有then，但else后面没有</li></ul></li></ul></li></ul></li><li>选择判断</li><li style="list-style: none; display: inline"><ul><li>形式</li><li style="list-style: none; display: inline"><ul><li>case $变量 in</li><li>  &quot;内容1&quot;)</li><li>     ........</li><li>     ;;</li><li>  &quot;内容2&quot;)</li><li>     ........</li><li>     ;;</li><li>  *)</li><li>     .......</li><li>     ;;</li><li>esac</li></ul></li><li>内容后边有一个右括号</li><li>内容对应的动作之后又两个分号</li><li>*代表了其他情况即default</li></ul></li><li>自定义函数function</li><li style="list-style: none; display: inline"><ul><li>形式</li><li style="list-style: none; display: inline"><ul><li>function fname() {</li><li>          ............</li><li>}</li></ul></li><li>function内有内置变量</li><li>$0表示函数名称即fname</li><li>$1,$2,$3........表示第1,2,3......个变量</li></ul></li><li>循环loop</li><li style="list-style: none; display: inline"><ul><li>形式1：当……</li><li style="list-style: none; display: inline"><ul><li>while [ 条件判别式 ]</li><li>do</li><li>      ..........</li><li>done</li></ul></li><li>形式2：直到……</li><li style="list-style: none; display: inline"><ul><li>until [ 条件判别式 ]</li><li>do</li><li>      ..........</li><li>done</li></ul></li><li>形式3：类似python</li><li style="list-style: none; display: inline"><ul><li>for var in con1 con2 con3 ...</li><li>do</li><li>      ...........</li><li>done</li><li> </li><li style="list-style: none; display: inline"><ul><li>第一次循环$var为con1</li><li>第二次循环$var为con2</li><li>……</li></ul></li></ul></li><li>形式4：（类似C语言，但是不能用i++）</li><li style="list-style: none; display: inline"><ul><li>for ( ( 初始值; 限制值; 步长 ) )</li><li>do</li><li>       ......</li><li>done</li></ul></li></ul></li><li>shell script的追踪和调试：sh</li><li style="list-style: none; display: inline"><ul><li>基本语法：sh [-nvx] script.sh</li><li style="list-style: none; display: inline"><ul><li>-n：仅检查语法</li><li>-v：执行脚本前先将脚本打印到屏幕上</li><li>-x：追踪，将使用到的脚本内容打印到屏幕上</li></ul></li></ul></li></ul><div><br></div></div>
</div></a></body></html>\00
