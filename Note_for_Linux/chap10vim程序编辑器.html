<html>
<head>
  <title>chap10vim程序编辑器</title>
  <basefont face="微软雅黑" size="2">
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8">
  <meta name="exporter-version" content="Evernote Windows/274507; Windows/6.3.9600;">
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="365">
<h1>chap10vim程序编辑器</h1>

<div>
<div style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><ul><li>意义</li><li style="list-style: none; display: inline"><ul><li>所有UNIX Like系统都会内置vi文本编辑器，其他文本编辑器不一定存在</li><li>很多软件的编辑接口都会主动调用vi</li><li>vim具有程序编辑的能力，可以主动以字体颜色辨别语法正确性，方便程序设计</li><li>程序简单，编辑速度相当快速</li></ul></li><li>vi包括三种模式</li><li style="list-style: none; display: inline"><ul><li>一般模式</li><li style="list-style: none; display: inline"><ul><li>移动光标、删除字符或整行、复制、粘贴</li></ul></li><li>编辑模式</li><li style="list-style: none; display: inline"><ul><li>左下角有INSERT或REPLACE字样</li></ul></li><li>命令行模式</li><li style="list-style: none; display: inline"><ul><li>查找数据、读取、保存、大量替换字符、离开、显示行号等功能</li></ul></li></ul></li><li>vi下的[tab]按键与空格符结果不同</li><li>常用命令</li><li style="list-style: none; display: inline"><ul><li>一般模式</li><li style="list-style: none; display: inline"><ul><li>[ctrl] + [f] / [page down]：下翻一页</li><li>[ctrl] + [b] / [page up]：上翻一页</li><li>0 / [home]：移动到行首</li><li>$ / [end]：移动到行末</li><li>G：移动到最后一行</li><li>nG：移动到第n行</li><li>gg：移动到第一行</li><li>N[Enter]：下移N行</li><li>/word：向下查找word</li><li>?word：向上查找word</li><li>:n1,n2s/word1/word2/g：在第n1~第n2行间查找word1并替换为word2</li><li style="list-style: none; display: inline"><ul><li>n2可以用$代替，代表最后一行</li><li>g若改为gc，表示确认（confirm）模式，每次询问是否要替换</li></ul></li><li>x / [Del]：向后删除字符</li><li>X / [Backspace]：向前删除字符</li><li>dd：删除整行</li><li>ndd：删除以下的n行</li><li>yy：复制整行</li><li>nyy：复制以下的n行</li><li>p：（小写）粘贴到下一行</li><li>P：（大写）粘贴到上一行</li><li>u：复原前一个操作</li><li>[ctrl] + r：重做上一个操作</li><li>.：（小数点）重复上一个操作</li><li>块选择——</li><li style="list-style: none; display: inline"><ul><li>V：字符选择、行选择</li><li>[ctrl] + v：长方形的块选择</li><li>y：复制选择块</li><li>d：删除选择块</li></ul></li></ul></li><li>从一般模式切换到编辑模式</li><li style="list-style: none; display: inline"><ul><li>Insert mode：</li><li style="list-style: none; display: inline"><ul><li>i：当前字符处插入</li><li>I：本行第一个非空字符处插入</li><li>a：下一个字符处插入</li><li>A：本行最后一个字符处插入</li><li>o：在下一行插入新行</li><li>O：在上一行插入新行</li></ul></li><li>Replace mode：</li><li style="list-style: none; display: inline"><ul><li>r：只替换当前字符一次后自动退出</li><li>R：持续替换字符，直到手动退出</li></ul></li><li>[Esc]：退出到一般模式</li></ul></li><li>从一般模式到命令行模式</li><li style="list-style: none; display: inline"><ul><li>:w：保存</li><li>:w!：强制写入，主动修改文件权限（如果你能够修改的话）</li><li>:q：离开</li><li>:q!：强制离开而不保存</li><li>:wq：保存并离开</li><li>:w[filename]：另存为filename</li><li>:! command：暂时离开vi，在终端执行command命令</li><li>环境参数设置——</li><li style="list-style: none; display: inline"><ul><li>:set nu：显示行号</li><li>:set nonu</li><li>:set hlsearch：（默认）高亮度查找（匹配字符串反白）</li><li>:set nohlsearch</li><li>:set autoindent：自动缩排</li><li>:set noautoindent</li><li>:set backup：主动备份当前编辑的（file）文件为（file~）文件</li><li>:set ruler：显示状态栏</li><li>:set showwmode：在左下角显示--INSERT--等字眼</li><li>:set backspace=[0 | 1 | 2]：退格键模式</li><li style="list-style: none; display: inline"><ul><li>0或1为仅可删除刚刚输入的字符</li><li>2为可以删除任意字符</li></ul></li><li>:set all：显示所有环境参数设置</li><li>:set：显示你手动修改过的参数设置</li><li>:syntax on：根据语法对关键词进行不同颜色的显示</li><li>:syntax off</li><li>:set bg=[dark | light]：颜色色调样式</li></ul></li><li>多文件编辑——</li><li style="list-style: none; display: inline"><ul><li>一开始打开文件时就可以同时打开多个文件（空格隔开）</li><li>:n：编辑下一个文件</li><li>:N：编辑上一个文件</li><li>:files：列出目前所有文件</li><li>:sp：为当前文件打开一个新窗口</li><li>:sp filename：打开另一个文件</li><li>[ctrl] + [w] + [j]/[↓]：切换到下一个窗口</li><li style="list-style: none; display: inline"><ul><li>组合键用法：先同时按下[ctrl]和[w]，松开后按下[j]或[↓]</li></ul></li><li>[ctrl] + [w] + [k]/[↑]：切换到上一个窗口</li><li>[ctrl] + [w] + [q]：关闭当前窗口</li><li style="list-style: none; display: inline"><ul><li>也可以切换到该窗口后通过:q关闭</li></ul></li></ul></li></ul></li><li>感叹号（!）表示强制</li><li>命令前的数字表示“重复几次”或“第几”</li></ul></li><li>编辑过程中，vim会主动在文件目录下创建名为.filename.swap的文件，为文件恢复提供依据</li><li>文件错误</li><li style="list-style: none; display: inline"><ul><li>问题一：有其他人或程序同时编辑一个文件</li><li>问题二：vim环境异常关闭</li><li>打开文件时会出现错误信息和以下操作选项：</li><li style="list-style: none; display: inline"><ul><li>[O]pen read-only：以只读的形式打开</li><li>[E]dit anyway：不载入暂存文件内容，以正常模式打开</li><li style="list-style: none; display: inline"><ul><li>但是容易出现多人互相修改对方文件的问题</li></ul></li><li>[R]ecover：加载暂存文件，恢复文件数据</li><li>[D]elete it：删除暂存文件</li><li>[Q]uit：离开</li><li>[A]bort：与Quit差不多</li></ul></li></ul></li><li>大部分distributions已经用vim替代vi</li><li style="list-style: none; display: inline"><ul><li>把vi作为vim命令的别名了！</li></ul></li><li>vim会主动把我们曾经的行为记录到~/.viminfo文件内</li><li>整体vim的设置值放置在/etc/vimrc文件内</li><li style="list-style: none; display: inline"><ul><li>不过不建议修改，而应修改~/.vimrc文件（如果不存在，可以手动创建）</li><li>书写规则</li><li style="list-style: none; display: inline"><ul><li>一个值一行</li><li>跟命令行设置环境参数形式相同，也可以省略冒号（:）</li><li>双引号（&quot;）表示注释</li><li style="list-style: none; display: inline"><ul><li>并不是把注释包含起来</li><li>只需要在开头写上引号</li></ul></li></ul></li></ul></li><li>中文编码的显示</li><li style="list-style: none; display: inline"><ul><li>考虑因素</li><li style="list-style: none; display: inline"><ul><li>系统默认支持的语系数据，与/etc/sysconfig/i18n文件有关</li><li>终端接口的语系，与变量LANG有关</li><li>文件原本的编码</li><li>打开终端的窗口界面的编码</li></ul></li><li>Windows上的软件经常默认使用big5编码</li><li>Linux的tty1~tty6默认不支持中文编码</li></ul></li><li>DOS与Linux的断行字符</li><li style="list-style: none; display: inline"><ul><li>“^M”称为CR符号</li><li>“$”称为LF符号</li><li>DOS采用CRLF作为断行字符（即“^M$”）</li><li>Linux采用LF作为断行字符（即“$”）</li><li>所以纯文本文件在不同系统上打开需要转换不同的格式</li><li style="list-style: none; display: inline"><ul><li>dos2UNIX [-kn] file [newfile]</li><li>UNIX2dos [-kn] file [newfile]</li><li style="list-style: none; display: inline"><ul><li>-k：保留原本的mtime</li><li>-n：保留源文件，将结果输出到新文件newfile</li><li>嘿嘿，这里的2就是two表示to哦！</li></ul></li></ul></li><li>Windows下把文件编辑后不建议直接上传到Linux系统</li></ul></li><li>语系编码转换：iconv</li><li style="list-style: none; display: inline"><ul><li>显示：iconv --list</li><li style="list-style: none; display: inline"><ul><li>列出iconv支持的语系数据</li></ul></li><li>修改：iconv -f 原本编码 -t 新编码 filename [-o newfile]</li><li style="list-style: none; display: inline"><ul><li>-o：保留源文件，新建编码文件</li></ul></li><li>将繁体中文的big5，utf8转换为简体中文的gb2312</li><li style="list-style: none; display: inline"><ul><li>iconv -f big5 -t gb2312 **.big5 -o **.gb</li></ul></li><li>将繁体中文的utf8转换为简体中文的utf8</li><li style="list-style: none; display: inline"><ul><li>iconv -f utf8 -t big5 **.utf8 | &gt; iconv -f big5 -t gb2312 | iconv -f gb2312 -t utf8 -o **.gb.utf5</li></ul></li></ul></li></ul><div><img src="chap10vim程序编辑器_files/vim常用命令.jpg" type="image/jpeg" style="cursor: default;"><br></div></div>
</div></a></body></html>\00
