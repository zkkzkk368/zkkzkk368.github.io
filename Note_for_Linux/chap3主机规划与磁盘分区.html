<html>
<head>
  <title>chap3主机规划与磁盘分区</title>
  <basefont face="微软雅黑" size="2">
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8">
  <meta name="exporter-version" content="Evernote Windows/274507; Windows/6.3.9600;">
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="281">
<h1>chap3主机规划与磁盘分区</h1>

<div>
<div style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><ul><li>在Linux系统中，每个设备都被当成一个文件来对待</li><li style="list-style: none; display: inline"><ul><li>几乎所有的硬件设备文件都在目录/dev内</li><li>常见设备文件名</li><li style="list-style: none; display: inline"><ul><li>IDE硬盘：/dev/hd[a-d]</li><li>SCSI/SATA/USB设备：/dev/sd[a-p]</li><li>软驱：/dev/fd[0-1]</li><li>打印机</li><li style="list-style: none; display: inline"><ul><li>25针：/dev/lp[0-2]</li><li>USB：/dev/usb/lp[0-15]</li></ul></li><li>鼠标</li><li style="list-style: none; display: inline"><ul><li>USB：/dev/usb/mouse[0-15]</li><li>PS2：/dev/psaux</li></ul></li><li>当前CD ROM/DVD ROM：/dev/cdrom</li><li>当前鼠标：/dev/mouse</li><li>磁带机：（不同distribution可能有不同的文件名）</li><li style="list-style: none; display: inline"><ul><li>IDE：/dev/ht0</li><li>SCSI：/dev/st0</li></ul></li></ul></li></ul><div>磁盘连接方式与设备文件名</div></li><li style="list-style: none; display: inline"><ul><li>一个IDE扁平电缆可以连接两个IDE设备，通常主机会提供两个IDE接口，分别称为IDE1（primary）、IDE2（secondary），每条电缆上由分为主设备（Master）、从设备（Slave）</li></ul></li><li style="list-style: none; display: inline"><ul><li style="list-style: none; display: inline"><ul><li>相应文件名</li><li style="list-style: none; display: inline"><ul><li><br></li></ul></li><li><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><table border="1" cellpadding="2" cellspacing="0" width="100%"><tbody><tr><td valign="top">IDE\Jumper</td><td valign="top">Master</td><td valign="top">Slave</td></tr><tr><td valign="top">IDE1（Primary）</td><td valign="top">/dev/hda</td><td valign="top">/dev/hdb</td></tr><tr><td valign="top">IDE2（Secondary）</td><td valign="top">/dev/hdc</td><td valign="top">/dev/hdd</td></tr></tbody></table></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><br></blockquote><br></li></ul></li><li>SATA/USB接口的磁盘没有一定的顺序，根据Linux内核检查到磁盘的顺序来命名</li></ul></li><li>磁盘</li><li style="list-style: none; display: inline"><ul><li>主要由盘片、机械手臂、磁头与主轴马达组成</li><li>数据是写在盘片上的，盘片又可以细分为扇区（Sector）与柱面（Cylinder）两种单位，其中每个扇区为512bytes</li><li>磁盘的第一扇区尤为重要，它记录了磁盘的重要信息</li><li style="list-style: none; display: inline"><ul><li>主引导分区（Master Boot Record, MBR）：446bytes，可安装引导加载程序的地方</li><li>分区表（partition table）：64bytes，记录磁盘分区的状态</li><li style="list-style: none; display: inline"><ul><li>磁盘文件名后面的数字与分区所在位置有关</li><li>“分区”实际上只是在那64bytes的磁盘空间进行操作</li><li>磁盘默认只能写入四组分区信息，分区信息分为主分区（Primary）和扩展分区（Extended）</li><li>分区的最小单位为柱面</li><li>系统往磁盘写入数据时，一定会参考磁盘分区表，有针对性地对某个分区进行处理</li><li>扩展分区的目的是用额外的扇区来记录分区信息</li><li style="list-style: none; display: inline"><ul><li>扩展分区本身不能拿来格式化，但逻辑分区可以</li><li>通过扩展分区指向的区块可以继续做分区的记录</li><li>由扩展分区继续分出来的分区称为逻辑分区</li><li style="list-style: none; display: inline"><ul><li>逻辑分区的设备名称号码是从5开始的</li></ul></li><li>扩展分区至多只能有一个</li><li>逻辑分区的数量由操作系统和磁盘接口决定</li><li style="list-style: none; display: inline"><ul><li>在Linux系统中，IDE硬盘最多有59个逻辑分区，SATA硬盘则由11个</li></ul></li><li>因为逻辑分区的信息都记录在扩展分区内，所以如果扩展分区被破坏，所有的逻辑分区都会被删除</li></ul></li><li>分区表就类似一个指针数组，指向分区所在的起始柱面；而扩展分区就是用额外的空间开辟新的指针数组，扩展分区就相当于二级指针，指向这个指针数组</li></ul></li></ul></li><li>如果磁盘的第一扇区物理坏掉了，这个磁盘大概也就没有用了</li><li>分区时一般把扩展分区放在磁盘的末端</li></ul></li><li>开机流程与主引导分区（MBR）</li><li style="list-style: none; display: inline"><ul><li>开机流程</li><li style="list-style: none; display: inline"><ul><li>BIOS：开机主动执行的韧体，识别第一个可开机的设备</li><li>MBR：第一个可开机的设备的第一扇区内的主引导分区块，内含引导加载程序</li><li>引导加载程序（Boot loader）：可读取内核文件的软件，有以下功能：</li><li style="list-style: none; display: inline"><ul><li>提交菜单：用户可以选择不同的开机选项，实现多重引导</li><li>载入内核文件：直接指向可开机的程序区段来开始操作系统</li><li>转交其他loader：将引导加载功能转交给其他loader负责，这就允许将引导加载程序安装到各个分区的引导扇区（boot sector）上，而不必安装在MBR中</li></ul></li><li>内核文件：开始操作系统的功能</li></ul></li><li>BIOS和MBR由硬件支持，boot loader是操作系统安装在MBR上的一套非常小却又完美的软件</li><li>多重引导</li><li style="list-style: none; display: inline"><ul><li>先加载MBR，在菜单上选择要启动的系统</li><li>接下来直接载入第一分区的系统，或者转交其他loader加载其他系统</li><li>注意：</li><li style="list-style: none; display: inline"><ul><li>实际可开机的内核文件在各个分区中</li><li>loader只能认识自己的系统分区内的可开机内核文件，以及其他loader</li><li>loader可以直接或间接将管理权转交另一个管理程序</li></ul></li></ul></li><li>安装多重引导，最好先安装windows再安装linux</li><li style="list-style: none; display: inline"><ul><li>linux安装时，可选择将引导加载程序安装在MBR或个别分区的启动扇区（/boot），而且linux的loader可以手动设置菜单，加入windows的开机选项</li><li>windows安装时，会主动覆盖掉MBR以及自己所在分区的启动扇区，而没有提供手动设置菜单的功能，但是可以通过spfdisk、easybcd等软件进行引导（启动驱动器务必指向挂载/boot的分区，引导分区必须设置为挂载/boot的分区）</li></ul></li><li>目录树结构（directory tree）</li><li style="list-style: none; display: inline"><ul><li>以根目录（\）为主</li><li>挂载：以一个目录为进入点，进入磁盘的某个分区；这个进入点就叫挂载点</li><li>linux默认将光驱数据放到/media/cdrom/目录下</li></ul></li></ul></li></ul></div>
</div></a></body></html>\00
