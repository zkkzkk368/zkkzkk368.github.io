
<html>
<head>
  <title>Evernote Export</title>
  <basefont face="微软雅黑" size="2">
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8">
  <meta name="exporter-version" content="Evernote Windows/274507; Windows/6.3.9600;">
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="427">

<div>
<div style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><ul><li>bash通配符≠RegEx</li><li style="list-style: none; display: inline"><ul><li>如星号*的区别</li></ul></li><li>依照严谨程度分为基础正则表达式和扩展正则表达式</li><li>语系对正则表达式的结果有影响</li><li style="list-style: none; display: inline"><ul><li>要留意当前环境的语系</li><li>一般采用C语系或en等英文语系</li></ul></li><li>正则表达式需要工具程序辅助才能实现</li><li>特殊符号</li><li style="list-style: none; display: inline"><ul><li>[:alnum:]：（alpha &amp; number）[0-9A-Za-z]</li><li>[:alpha:]：[A-Za-z]</li><li>[:blank:]：空格或[tab]</li><li>[:cntrl:]：（control）键盘上的控制按钮CR，LF，TAB，DEL等</li><li>[:digit:]：[0-9]</li><li>[:graph:]：除了[:blank:]（空格符）外的其他所有按键</li><li>[:lower:]：[a-z]</li><li>[:print:]：任何可打印字符</li><li>[:punct:]：（punctuation symbol）标点符号</li><li>[:upper:]：[A-Z]</li><li>[:space:]：任何会产生空白的字符（包含[:blank:]）空格键、tab、CR等</li><li>[:xdigit:]：十六进制数字符[0-9a-fA-F]</li></ul></li><li>grep的高级参数</li><li style="list-style: none; display: inline"><ul><li>基本语法：grep [-A] [-B] [--color=auto] '搜寻字符串' filename</li><li style="list-style: none; display: inline"><ul><li>-A：（after）  后接数字，表示除了列出匹配行外，后续几行也列出来</li><li>-B：（before）后接数字，表示除了列出匹配行外，前面几行也列出来</li><li>--color=auto：匹配数据显示特殊颜色</li></ul></li></ul></li><li>基础正则表达式字符</li><li style="list-style: none; display: inline"><ul><li>^word：待查找的字符串word在行首</li><li>word$：待查找的字符串word在行尾</li><li>.：一个任意字符</li><li>\：转义字符</li><li>*：前一个字符重复0~∞次</li><li>[list]：list中的字符集中的任意一个字符</li><li>[n1-n2]：字符集中使用范围</li><li>[^list]：反向选择</li><li>\{n,m\}：前一个字符重复n~m次</li><li style="list-style: none; display: inline"><ul><li>此处用了转移，是因为bash下花括号{}代表了命令块</li></ul></li></ul></li><li>sed工具：管道命令之一</li><li style="list-style: none; display: inline"><ul><li>用于分析stdin</li><li>基本语法：sed [-nefr] [动作]</li><li style="list-style: none; display: inline"><ul><li>-n：（silent）安静模式，只显示被处理的行</li><li style="list-style: none; display: inline"><ul><li>默认显示所有行</li></ul></li><li>-e：直接在命令行模式上进行sed的动作编辑</li><li>-f：后接filename，引用filename文件来作为[动作]</li><li>-r：使用扩展正则表达式</li><li style="list-style: none; display: inline"><ul><li>默认为基础正则表达式</li></ul></li><li>-i：直接修改文件，不输出到屏幕（危险操作）</li><li style="list-style: none; display: inline"><ul><li>一般用来修改、替换大文件的内容</li><li>比如100W行的文件，用vim是不合理的</li></ul></li><li>[动作]说明：</li><li style="list-style: none; display: inline"><ul><li>格式：[n1 [,n2] ] function</li><li>n1，n2：为进行function操作的行范围，$可以代表最后一行</li><li>function：</li><li style="list-style: none; display: inline"><ul><li>a：新增，后接字符串，会出现在n1的下一行（此时不需要n2）</li><li style="list-style: none; display: inline"><ul><li>若要新增多行，可以用反斜杠（\）转移回车[Enter]</li></ul></li><li>c：替换，后接字符串，用该字符串替换n1-n2行的内容</li><li>d：删除，通常不接参数</li><li>i：插入，后接字符串，会出现在n1的上一行（此时不需要n1）</li><li>p：打印，打印出所选择的行（一般与-n一起用）</li><li>s：替换，可以通过正则表达式匹配替换字符串</li><li style="list-style: none; display: inline"><ul><li>形式：n1,n2s/OLDSTR/NEWSTR/g</li><li>将n1-n2间OLDSTR匹配的字符串替换为NEWSTR字符串</li></ul></li></ul></li></ul></li></ul></li></ul></li><li>扩展正则表达式</li><li style="list-style: none; display: inline"><ul><li>+：前一个字符重复1~∞次</li><li>?：前一个字符重复0~1次</li><li>|：用或（or）的方式找出数个字符串</li><li style="list-style: none; display: inline"><ul><li>如aaa|bbb可以匹配aaa或bbb</li></ul></li><li>()：分组</li><li> </li><li>grep只支持基础正则表达式，egrep支持扩展正则表达式</li></ul></li><li>printf：格式化打印</li><li style="list-style: none; display: inline"><ul><li>基本语法：printf '打印格式' 实际内容</li><li>打印格式（类似C语言）：</li><li style="list-style: none; display: inline"><ul><li>\a：警告声音输出</li><li>\b：退格键</li><li>\f：清屏</li><li>\n：换行</li><li>\r：回车键</li><li>\t：水平[tab]</li><li>\v：垂直[tab]</li><li>\xNN：NN为两位数字，转换为对应ASCII码的字符</li><li>%ns：</li><li>%ni</li><li>%N.nf</li></ul></li><li>如：printf '%s\t %s\t %s\t %s\t \n' $(cat printf.txt)</li></ul></li><li>awk：小型数据处理工具</li><li style="list-style: none; display: inline"><ul><li>将一行分为多个“字段”处理，默认分隔符为空格或[tab]</li><li>基本语法：awk '条件类型1{动作1} 条件类型2{动作2} .....' filename</li><li style="list-style: none; display: inline"><ul><li>若不给出条件类型，则直接执行动作</li><li>内置变量</li><li style="list-style: none; display: inline"><ul><li>$0,$1,$2等</li><li>NF：该行拥有的字段总数</li><li>NR：当前为第几行</li><li>FS：分隔符，默认为空格</li></ul></li><li>运算符</li><li style="list-style: none; display: inline"><ul><li>&gt;  &lt;  &gt;=  &lt;=  ==  !=</li></ul></li><li>设置变量</li><li style="list-style: none; display: inline"><ul><li>直接用等号赋值即可</li></ul></li><li>条件类型关键字BEGIN和END</li><li style="list-style: none; display: inline"><ul><li>可以使awk开始读取数据前做预处理，或读取所有数据后做后续处理</li><li>如：改变分隔符</li><li style="list-style: none; display: inline"><ul><li>cat /etc/passwd | awk 'BEGIN {FS=&quot;:&quot;} $3 &lt; 10 {print $1 &quot;\t&quot; $3}'</li></ul></li></ul></li><li>注意</li><li style="list-style: none; display: inline"><ul><li>动作内的命令可以有多个，用分号（;）来分隔，也可以直接用[Enter]隔开</li><li>变量直接使用，无需加前导符$</li><li>动作内是支持if语句的，因此条件类型也可以放入动作中</li></ul></li></ul></li><li>工作流程</li><li style="list-style: none; display: inline"><ul><li>读入第一行，将该行的数据填入$0,$1,$2等变量</li><li style="list-style: none; display: inline"><ul><li>$0代表整行，其余代表第几字段</li></ul></li><li>依据条件类型的限制，判断是否需要进行总做</li><li>做完所有的动作和条件类型</li><li>处理后续的行</li></ul></li></ul></li><li>纯文本比较、目录比较：diff</li><li style="list-style: none; display: inline"><ul><li>以行为单位</li><li>基本用法：diff [-bBi] from-file to-file</li><li style="list-style: none; display: inline"><ul><li>from-file：欲做比较的文件</li><li>to-file：目的比较文件</li><li>也可以用减号-表示stdin</li><li> </li><li>-b：忽略多个空白的区别</li><li>-B：忽略空白行的区别</li><li>-i：忽略大小写的区别</li></ul></li><li>也可以直接比较目录间的区别</li></ul></li><li>二进制文件比较：cmp</li><li style="list-style: none; display: inline"><ul><li>以字节为单位</li><li>基本语法：cmp [-s] file1 file2</li><li style="list-style: none; display: inline"><ul><li>-s：列出所有不同点处的字节处</li><li style="list-style: none; display: inline"><ul><li>默认值列出第一个不同点</li></ul></li></ul></li></ul></li><li>diff + patch：补丁制作与还原</li><li style="list-style: none; display: inline"><ul><li>制作补丁文件：diff -Naur OLDFILE NEWFILE &gt; FILE.patch</li><li style="list-style: none; display: inline"><ul><li>比较新旧文件NEWFILE和OLDFILE，制作不定文件FILE.patch</li></ul></li><li>更新文件：patch -pN &lt; FILE.patch</li><li style="list-style: none; display: inline"><ul><li>新旧文件信息会记录在FILE.patch中，包括文件名</li><li>执行该命令后会将OLDFILE的内容更新为NEWFILE的内容（文件名不变）</li><li>-p：取消N层目录（用于整个目录的补丁）</li><li style="list-style: none; display: inline"><ul><li>同一目录下直接使用-p0即可</li></ul></li></ul></li><li>还原文件：patch -R -pN &lt; FILE.patch</li><li style="list-style: none; display: inline"><ul><li>执行该命令后会将NEWFILE的内容还原为OLDFILE的内容（文件名不变）</li><li>-R：代表还原</li></ul></li></ul></li><li>文件打印准备：pr</li><li style="list-style: none; display: inline"><ul><li>略</li></ul></li></ul><div><br></div></div>
</div></a></body></html>\00
