
<html>
<head>
  <title>Evernote Export</title>
  <basefont face="微软雅黑" size="2">
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8">
  <meta name="exporter-version" content="Evernote Windows/274507; Windows/6.3.9600;">
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="411">

<div>
<div style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><ul><li>硬件、内核与shell</li><li style="list-style: none; display: inline"><ul><li>通过shell将我们输入的命令和内核通信，让内核可以控制硬件正确无误的工作</li><li>shell只是提供用户操作系统的接口</li><li>狭义的shell是指命令行方面的软件；广义的shell包括图形界面的软件</li></ul></li><li>bash</li><li style="list-style: none; display: inline"><ul><li>全称Bourne Again SHell</li><li>是Bourne Shell的增强版本</li></ul></li><li>查询当前linux可用的shell（/etc/shells文件）</li><li style="list-style: none; display: inline"><ul><li>至少有以下几个</li><li>/bin/sh：已为bash取代</li><li>/bin/bash：默认shell</li><li>/bin/ksh：Kornshell，兼容于bash</li><li>/bin/tcsh：整合C Shell，提供更多功能</li><li>/bn/csh：已被tcsh取代</li><li>/bin/zsh：基于ksh，功能更强大</li><li> </li><li>系统某些服务运行中会通过该文件查询用户可用的shells</li></ul></li><li>用户登录取得的shell</li><li style="list-style: none; display: inline"><ul><li>记录在/etc/passwd文件的最后一个字段中</li></ul></li><li>bash shell的功能</li><li style="list-style: none; display: inline"><ul><li>当前linux的标准shell</li><li>命令记忆</li><li style="list-style: none; display: inline"><ul><li>默认记忆1000个命令</li><li>这一次登录的命令会暂存到临时内存中</li><li>注销后会把最近的HISTSIZE条命令记录在~/.bash_history文件中</li><li>如果同时打开多个bash，只有最后注销的bash的命令会写入文件中</li><li>登录后系统会主动读取~/.bash_history文件</li><li>但这个功能也有可能会被黑客利用，所以记忆的命令条数最好少一些</li><li>history n</li><li style="list-style: none; display: inline"><ul><li>列出最近的n条命令</li><li>若不指定n，则为内存中的全部记忆</li></ul></li><li>history -c</li><li style="list-style: none; display: inline"><ul><li>清空当前shell的history内容</li></ul></li><li>history [-raw] histfiles</li><li style="list-style: none; display: inline"><ul><li>-r：将histfiles的记录读取到当前shell的history记忆中</li><li>-a：将此次登录新增的history记忆加入histfiles中</li><li style="list-style: none; display: inline"><ul><li>若不给出histfiles，默认写入~/.bash_history</li></ul></li><li>-w：将目前的所有history记忆另存到histfiles中</li><li style="list-style: none; display: inline"><ul><li>若不给出histfiles，默认写入~/.bash_history</li></ul></li></ul></li><li>快速执行history中的命令</li><li style="list-style: none; display: inline"><ul><li>!number</li><li style="list-style: none; display: inline"><ul><li>执行history中的第number条命令</li></ul></li><li>!command</li><li style="list-style: none; display: inline"><ul><li>执行histroy中最近的一条开头为command的命令</li></ul></li><li>!!</li><li style="list-style: none; display: inline"><ul><li>执行上一条命令</li></ul></li></ul></li></ul></li><li>命令与文件补全</li><li style="list-style: none; display: inline"><ul><li>[tab]接在命令的第一个字后面为命令补全</li><li>[tab]接在命令的第二个字后面为文件补全</li></ul></li><li>命令别名设置（alias）</li><li style="list-style: none; display: inline"><ul><li>直接输入alias可以列出目前所有的命令别面</li><li>设置</li><li style="list-style: none; display: inline"><ul><li>如：alias lm='ls -al'</li><li>则lm命令代表了ls -al</li></ul></li><li>取消</li><li style="list-style: none; display: inline"><ul><li>如：unalias lm</li></ul></li></ul></li><li>作业控制、前后台控制（job control, foreground, background）</li><li>程序脚本（shell script）</li><li>通配符（wildcard）</li></ul></li><li>type：bash内置命令</li><li style="list-style: none; display: inline"><ul><li>主要功能：找出“执行文件”（类似which）</li><li>基本语法：type [-tpa] name</li><li>不带参数：显示name为外部命令或是bash内置命令</li><li>-t：只以下列字眼显示命令的意义</li><li style="list-style: none; display: inline"><ul><li>file：外部命令</li><li>alias：命令别名</li><li>builtin：bash内置命令</li></ul></li><li>-p：只name为外部命令时才显示完整文件名</li><li>-a：列出PATH路径中所有含name的命令（包括alias）</li></ul></li><li>多行命令</li><li style="list-style: none; display: inline"><ul><li>用反斜杠（\）转义回车[Enter]，使命令可以多行书写</li></ul></li><li>变量</li><li style="list-style: none; display: inline"><ul><li>查看所有变量：set</li><li style="list-style: none; display: inline"><ul><li>包括环境变量和用户自定义变量</li><li>常见系统变量（以下变量不是环境变量，但与bash的操作环境有关）</li><li style="list-style: none; display: inline"><ul><li>PS1：命令提示符的格式</li><li style="list-style: none; display: inline"><ul><li>设置与格式化字符串类似，有以下特殊符号</li><li>\d：“星期 月 日”的日期格式</li><li>\H：完整主机名</li><li>\h：仅取主机名的第一个字段（以小数点 . 为分隔符）</li><li>\t：显示24小时制时间“HH:MM:SS”</li><li>\T：显示12小时制时间“HH:MM:SS”</li><li>\A：显示24小时制时间“HH:MM”</li><li>\@：显示12小时制的“am”“pm”</li><li>\u：当前用户名</li><li>\v：当前bash信息</li><li>\w：完整工作目录名</li><li>\W：工作目录的最后一个目录名，通过basename函数</li><li>\#：登录以来执行的第几个命令</li><li>\$：提示符，root的#和一般用户的$</li></ul></li><li>$：当前shell的PID</li><li>?：上一个执行命令的回传码</li><li style="list-style: none; display: inline"><ul><li>成功执行一般回传0</li><li>失败则回传非0数，表示错误代码</li></ul></li><li>OSTYPE，HOSTTYPE，MACHTYPE</li><li style="list-style: none; display: inline"><ul><li>主机硬件与内核的等级</li></ul></li></ul></li></ul></li><li>环境变量</li><li style="list-style: none; display: inline"><ul><li>一般用大写字符表示</li><li>查看环境变量：env</li><li style="list-style: none; display: inline"><ul><li>是environment的缩写</li></ul></li><li>常见环境变量</li><li style="list-style: none; display: inline"><ul><li>HOME：用户的主文件夹</li><li>SHELL：当前使用的shell</li><li>HISTSIZE：历史命令记忆条数</li><li>MAIL：邮件信箱文件</li><li>PATH：执行文件查找路径</li><li>LANG：语系数据</li><li>RANDOM：产生一个0~32767的随机数</li><li style="list-style: none; display: inline"><ul><li>通过/dev/random文件</li></ul></li></ul></li></ul></li><li>显示：echo</li><li style="list-style: none; display: inline"><ul><li>echo $PATH</li><li>echo ${PATH}</li></ul></li><li>设置：直接用等号赋值</li><li style="list-style: none; display: inline"><ul><li>myname=YaHei</li><li>若变量未设置，则默认内容为“空”（与空字符串（''）不同）</li><li>规则：</li><li style="list-style: none; display: inline"><ul><li>等号两边不能有空格</li><li>只能是英文字母或数字，首字符不能为数字</li><li>若变量内容有空格，需要用双引号或单引号包含起来</li><li style="list-style: none; display: inline"><ul><li>双引号：保留特殊字符的特性</li><li style="list-style: none; display: inline"><ul><li>即可以在引号内通过$引用变量等</li></ul></li><li>单引号：引号内的内容只做纯文本处理</li></ul></li><li>可用反斜杠（\）转义特殊字符</li><li>引用其他命令的信息</li><li style="list-style: none; display: inline"><ul><li>可将命令包含在反引号（``）内</li><li>也可以将命令包含在$()内</li><li>如：version=`uname -r`</li><li>或：version=$(uname -r)</li><li>建议使用第二种方式</li></ul></li><li>内容累加</li><li style="list-style: none; display: inline"><ul><li>&quot;$变量&quot;累加内容</li><li>${变量}累加内容</li><li>如：PATH=&quot;$PATH&quot;:/home/bin</li><li>或：PATH=${PATH}:/home/bin</li><li>即将“:/home/bin”累加到变量PATH中</li></ul></li><li>转换为环境变量：export</li><li style="list-style: none; display: inline"><ul><li>不带参数表示显示所有环境变量</li><li>以供父进程或其他子进程使用</li><li>子进程会继承父进程的环境变量，而不会继承自定义变量</li><li>export PATH</li></ul></li><li>取消：unset</li><li style="list-style: none; display: inline"><ul><li>unset myname</li></ul></li></ul></li></ul></li><li>语系变量（locale）</li><li style="list-style: none; display: inline"><ul><li>显示当前支持的所有语系</li><li style="list-style: none; display: inline"><ul><li>locale -a</li></ul></li><li>显示当前各种环境采用的编码</li><li style="list-style: none; display: inline"><ul><li>local</li></ul></li><li>可以直接通过改变某个环境对应的语系变量</li><li>也可以直接通过设置LANG或者LC_ALL直接改变所有环境的编码</li><li>语系文件都放置在/usr/lib/local/目录中</li><li>整体系统默认的语系定义/etc/sysconfig/i18n</li></ul></li><li>有效范围</li><li style="list-style: none; display: inline"><ul><li>“环境变量”类似于“全局变量”</li><li>“自定义变量”类似于“局部变量”</li><li>变量的内存配置关系</li></ul></li><li>键盘读取：read</li><li style="list-style: none; display: inline"><ul><li>基本语法：read [-pt] variable</li><li>-p：提供提示符</li><li>-t：指定等待输入的秒数</li></ul></li><li>声明类型：declare或typeset</li><li style="list-style: none; display: inline"><ul><li>declare和typeset是一样的</li><li>基本语法：declare [-aixr] variable</li><li>不带参数：显示所有变量名称和内容</li><li>-a：数组（array）</li><li style="list-style: none; display: inline"><ul><li>设置</li><li style="list-style: none; display: inline"><ul><li>var[index]=content</li></ul></li><li>引用</li><li style="list-style: none; display: inline"><ul><li>建议用${var[indext]}</li></ul></li></ul></li><li>-i：整型（integer）</li><li>-x：环境变量</li><li>-r：只读（readonly），通常需要注销重新登录才能恢复</li></ul></li><li>bash变量基本定义</li><li style="list-style: none; display: inline"><ul><li>默认类型为字符串</li><li>数值运算的精读最多仅能达到整数类型</li></ul></li></ul></li><li>文件系统及程序的限制：ulimit</li><li style="list-style: none; display: inline"><ul><li>基本语法：ulimit [-SHacdfltu] [配额]</li><li>-H：hard limit，限制值</li><li>-S：soft limit，警告值</li><li>-a：不带配额，列出所有限制</li><li>-c：core file，限制内核文件的最大容量</li><li style="list-style: none; display: inline"><ul><li>内核文件core file，进程错误时会将内存中的信息写成文件</li></ul></li><li>-f：当前shell可创建的最大文件容量（单位kb）</li><li>-d：进程可用最大断裂内存（segment）容量</li><li>-l：可用于锁定（lock）的内存量</li><li>-t：可使用的最大CPU时间（秒）</li><li>-u：单一用户可以使用的最大进程数</li><li> </li><li>复原ulimit设置</li><li style="list-style: none; display: inline"><ul><li>注销再登录</li><li>也可以直接重新以ulimit设置</li><li>但一般用户如果用了ulimit -f，则只能继续减小文件容量而不能增加</li></ul></li></ul></li><li>变量的删除、替换</li><li style="list-style: none; display: inline"><ul><li>${变量#关键字}：    从前向后搜索，删除第一个符合关键字的最短数据（非贪婪）</li><li>${变量##关键字}：  从前向后搜索，删除第一个符合关键字的最长数据（贪婪）</li><li>${变量%关键字}：   从后向前搜索，删除第一个符合关键字的最短数据（非贪婪）</li><li>${变量%%关键字}：从后向前搜索，删除第一个符合关键字的最长数据（贪婪）</li><li> </li><li>${变量/旧字符串/新字符串}：替换第一个匹配项</li><li>${变量//旧字符串/新字符串}：替换所有匹配项</li></ul></li><li>变量的测试、设置</li><li style="list-style: none; display: inline"><ul><li>变量设置为“空”和“空字符串”是不同的概念</li><li>var和str为变量，expr为字符串常量</li><li>不影响str</li><li style="list-style: none; display: inline"><ul><li><table border="1" cellpadding="2" cellspacing="0" width="100%"><tbody><tr><td valign="top">设置方式</td><td valign="top">str为空</td><td valign="top">str为空字符串</td><td valign="top">str为非空字符串</td></tr><tr><td valign="top">var=${str-expr}</td><td valign="top">var=expr</td><td valign="top">var=</td><td valign="top">var=$str</td></tr><tr><td valign="top">var=${str:-expr}</td><td valign="top">var=expr</td><td valign="top">var=expr</td><td valign="top">var=$str</td></tr><tr><td valign="top">var=${str+expr}</td><td valign="top">var=</td><td valign="top">var=expr</td><td valign="top">var=expr</td></tr><tr><td valign="top">var=${str:+expr}</td><td valign="top">var=</td><td valign="top">var=</td><td valign="top">var=expr<br></td></tr></tbody></table><br></li></ul></li><li>可能影响str</li><li style="list-style: none; display: inline"><ul><li><table border="1" cellpadding="2" cellspacing="0" width="100%"><tbody><tr><td valign="top"><div>设置方式</div></td><td valign="top">str为空</td><td valign="top">str为空字符串</td><td valign="top">str为非空字符串</td></tr><tr><td valign="top">var=${str=expr}</td><td valign="top">str=expr<br>
var=expr</td><td valign="top">str不变<br>
var=</td><td valign="top">str不变<br>
var=$str</td></tr><tr><td valign="top">var=${str:=expr}</td><td valign="top">str=expr<br>
var=expr<br></td><td valign="top">str=expr<br>
var=expr</td><td valign="top">str不变<br>
var=$expr<br></td></tr><tr><td valign="top">var=${str?expr}</td><td valign="top">expr输出到stderr</td><td valign="top">var=</td><td valign="top">var=$str</td></tr><tr><td valign="top">var=${str:?expr}</td><td valign="top">expr输出到stderr</td><td valign="top">expr输出到stderr</td><td valign="top">var=$str</td></tr></tbody></table><br></li></ul></li></ul></li><li>命令查找顺序</li><li style="list-style: none; display: inline"><ul><li>相对/绝对路径的命令</li><li>alias命令别名</li><li>bash内置命令（builtin）</li><li>$PATH中查找的第一个命令</li></ul></li><li>bash的登录和欢迎信息</li><li style="list-style: none; display: inline"><ul><li>登录信息</li><li style="list-style: none; display: inline"><ul><li>/etc/issue文件</li><li>普通的字符和特殊字符</li><li>特殊字符</li><li style="list-style: none; display: inline"><ul><li>\d：本机端日期</li><li>\l：第几个终端机接口</li><li>\m：硬件等级</li><li>\n：主机网络名称</li><li>\o：domain name</li><li>\r：操作系统版本</li><li>\t：本机端时间</li><li>\s：操作系统名称</li><li>\v：操作系统版本</li></ul></li><li>用telnet连接主机时，显示的是/etc/issue.net而不是/etc/issue</li></ul></li><li>欢迎信息</li><li style="list-style: none; display: inline"><ul><li>/etc/motd文件</li><li>无特殊字符，直接给出文字信息</li></ul></li></ul></li><li>bash配置文件</li><li style="list-style: none; display: inline"><ul><li>login shell：通过完整的登录流程取得bash</li><li>non-login shell：不需要重复登录的方式取得bash，如图形化界面下直接打开终端及其子进程</li><li>关于su命令</li><li style="list-style: none; display: inline"><ul><li>默认情况下取得的是non-login shell</li><li>加入参数-或-l或--login后取得的是login shell</li></ul></li><li>login shell只读取两个文件</li><li style="list-style: none; display: inline"><ul><li>/etc/profile：系统整体设置</li><li style="list-style: none; display: inline"><ul><li>包含变量PATH、MAIL、USER、HOSTNAME、HISTSIZE等变量</li><li>并以此再去调用以下数据</li><li style="list-style: none; display: inline"><ul><li>/etc/inputrc：记录自定义输入的按键功能、热键等有无声音功能等</li><li>/etc/profile.d/*.sh：（需要r权限）规定接口的颜色、语系、部分命令别名等</li><li>/etc/sysconfig/i18n：（是由/etc/profile.d/lang.sh调用的）语系的相关设置</li></ul></li></ul></li><li>~/.bash_profile或~/.bash_login或~/.profile：用户个人设置</li><li style="list-style: none; display: inline"><ul><li>按照上述顺序读取，只读其中一个</li><li>只是为了照顾用户的习惯</li></ul></li></ul></li><li>non-login shell只读取~/.bashrc文件</li><li style="list-style: none; display: inline"><ul><li>不过有的发行版也会去读取/etc/bashrc文件或其他名字的文件</li><li style="list-style: none; display: inline"><ul><li>其中定义出以下数据</li><li>依据不同UID规定umask</li><li>依据不同的UID福鼎提示符（即PS1）</li><li>调用/etc/profile.d/*.sh</li></ul></li></ul></li><li>其他配置文件</li><li style="list-style: none; display: inline"><ul><li>/etc/man.config</li><li style="list-style: none; display: inline"><ul><li>定义了man page的路径</li><li>有时候手动安装程序，需要将/usr/local/程序名/man加入到该配置文件中</li></ul></li><li>~/.bash_history</li><li>~/.bash_logout</li><li style="list-style: none; display: inline"><ul><li>记录了注销bash后系统需要完成的操作</li><li>默认只进行清屏操作</li><li>还可以加入备份、清空暂存盘等操作</li></ul></li></ul></li><li>读入方式：source命令</li><li style="list-style: none; display: inline"><ul><li>如果修改了配置文件而不像注销重启</li><li>可以直接用source命令重新读取配置文件</li></ul></li></ul></li><li>终端机环境设置：stty，set</li><li style="list-style: none; display: inline"><ul><li>stty（setting tty）：终端机按键操作设置</li><li style="list-style: none; display: inline"><ul><li>基本语法1：stty [-a]</li><li style="list-style: none; display: inline"><ul><li>-a：将目前所有stty参数列出</li></ul></li><li>基本语法2：stty 操作 按键</li><li style="list-style: none; display: inline"><ul><li>其中^一般代表Ctrl组合键</li><li>^?代表[Backspace]</li></ul></li><li>常见操作：</li><li style="list-style: none; display: inline"><ul><li>eof：（默认^D）结束输入</li><li>erase：（默认^?）向后删除字符</li><li>intr：（默认^C）送出一个interrupt中断信号给当前程序</li><li>kill：（默认^U）删除目前命令行上所有文字</li><li>quit：（默认^\）送出一个quit信号给当前程序</li><li>start：（默认^Q）在某个进程停止后，重启他的输出</li><li>stop：（默认^S）停止目前屏幕的输出</li><li>susp：（默认^Z）送出一个terminal stop信号给当前进程，即暂停当前命令</li></ul></li></ul></li><li>set：终端机功能设置</li><li style="list-style: none; display: inline"><ul><li>基本语法：set [-uvCHhmBx]</li><li style="list-style: none; display: inline"><ul><li>-u：（默认关闭）使用未设置变量时会显示错误信息</li><li>-v：（默认关闭）讯息输出前会先显示讯息的原始内容</li><li>-x：（默认关闭）命令被执行前会显示命令内容（前面有++符号）</li><li>-h：（默认开启）与历史命令有关</li><li>-H：（默认开启）与历史命令有关</li><li>-m：（默认开启）与工作管理有关</li><li>-B：（默认开启）与括号[]的作用有关</li><li>-C：（默认关闭）使用&gt;等数据流重定向时，若文件存在则不会被覆盖</li><li> </li><li>若要取消设置，则将减号（-）改为加号（+）即可</li></ul></li></ul></li></ul></li><li>通配符（wildcard）</li><li style="list-style: none; display: inline"><ul><li>注意，通配符与正则表达式不同，但有点类似</li><li>*：代表0~∞个任意字符</li><li>?：代表一个任意字符</li><li>[]：代表一个括号内的任意字符，可以用减号（-）指定范围，可以用^符号表示反向选择</li></ul></li><li>bash下的特殊字符</li><li style="list-style: none; display: inline"><ul><li>#：批注</li><li>\：转义</li><li>|：管道</li><li>;：连续命令的分隔符</li><li>~：用户主文件夹</li><li>$：变量前导符</li><li>!：逻辑“非”（not）</li><li>/：目录路径分隔符</li><li>&gt;,&gt;&gt;：数据流重定向，输出导向</li><li>&lt;,&lt;&lt;：数据流重定向，输入导向</li><li>''：字符串，不置换变量，纯文本</li><li>&quot;&quot;：字符串，可置换变量</li><li>``：可执行命令，也可用$()</li><li>()：子shell的起止</li><li>{}：命令块的起止</li></ul></li><li>数据流重定向</li><li style="list-style: none; display: inline"><ul><li>标准输入输出</li><li style="list-style: none; display: inline"><ul><li>standard output：输出命令回传的正确信息</li><li>standard error output：输出命令回传的错误信息</li><li> </li><li>标准输入（stdin）：代码0，&lt;或&lt;&lt;</li><li style="list-style: none; display: inline"><ul><li>&lt;  表示以覆盖的方式</li><li>&lt;&lt;表示以累加的方式</li></ul></li><li>标准输出（stdout）：代码1，&gt;或&gt;&gt;</li><li style="list-style: none; display: inline"><ul><li>&gt;  表示以覆盖的方式</li><li>&gt;&gt;表示以累加的方式</li></ul></li><li>标准错误输出（stderr）：代码2，2&gt;或2&gt;&gt;</li><li style="list-style: none; display: inline"><ul><li>2&gt;  表示以覆盖的方式</li><li>2&gt;&gt;表示以累加的方式</li></ul></li></ul></li><li>/dev/null：垃圾桶黑洞设备</li><li style="list-style: none; display: inline"><ul><li>可以吃掉任何导向这个设备的信息</li><li>比如想要忽略错误信息：</li><li style="list-style: none; display: inline"><ul><li>find /home -name .bashrc &gt; list_right 2&gt; /dev/null</li></ul></li></ul></li><li>将stdout和stderr分别写到两个文件去</li><li style="list-style: none; display: inline"><ul><li>find /home -name .bashrc &gt;list_right 2&gt; list_error</li></ul></li><li>将stdout和stderr写到同一个文件去</li><li style="list-style: none; display: inline"><ul><li>find /home -name .bashrc &gt; list 2&gt;&amp;1</li><li>find /home -name .bashrc &amp;&gt; list</li></ul></li><li>用cat命令创建一个文件</li><li style="list-style: none; display: inline"><ul><li>cat &gt; file</li><li>按下ctrl + d 离开</li></ul></li><li>指定输入某段字符后即可离开（无需ctrl + d）</li><li style="list-style: none; display: inline"><ul><li>cat &gt; file &lt;&lt; &quot;eof&quot;</li><li>那么当file读到eof时即会离开，但是&quot;eof&quot;并不会写入文件中</li></ul></li><li>用stdin代替键盘输入来用cat命令创建一个文件</li><li style="list-style: none; display: inline"><ul><li>cat &gt; file &lt; ~/.bashrc</li></ul></li><li>重定向的常用情况</li><li style="list-style: none; display: inline"><ul><li>保存屏幕输出的信息</li><li>不希望后台程序的信息干扰屏幕输出</li><li>保存某些例行程序的执行结果</li><li>忽略某些错误信息</li><li>分别获取错误信息和正确信息</li></ul></li></ul></li><li>命令执行的判别依据：; 、, 、&amp;&amp; 、 ||</li><li style="list-style: none; display: inline"><ul><li>linux下的命令是从左至右执行的</li><li>一次执行多条命令（;）</li><li style="list-style: none; display: inline"><ul><li>如sync; sync; shutdown -h now</li></ul></li><li>依据命令回传码（$?）判断是否执行</li><li style="list-style: none; display: inline"><ul><li>cmd1 &amp;&amp; cmd2：只有cmd1正确执行才执行cmd2</li><li>cmd1 || cmd2：只有cmd1不能正确执行才执行cmd2</li><li>有趣的是，对于（$?），0表示正确执行，非0表示错误执行，这点与编程语言不同</li></ul></li><li>cmd1 &amp;&amp; cmd 2 || cmd3</li><li style="list-style: none; display: inline"><ul><li>以cmd1为条件，若正确执行则执行cmd2，若错误执行则执行cmd3</li><li>类似C语言的cmd1?cmd2:cmd3;</li></ul></li><li>cmd1 || cmd2 &amp;&amp; cmd3</li><li style="list-style: none; display: inline"><ul><li>以cmd1为条件，若正确执行则执行cmd3，若错误执行则执行cmd2</li><li>若cmd2正确执行，则接着执行cmd3</li></ul></li></ul></li><li>管道命令（pipe）</li><li style="list-style: none; display: inline"><ul><li>嗯……类似于过滤筛选功能</li><li>（|）仅能处理前一个命令回传的正确信息，不能处理错误信息，其后的命令必须是管道命令（即能处理stdin的命令）</li><li>文本命令</li><li style="list-style: none; display: inline"><ul><li>less、more、head、tail等</li></ul></li><li>选取命令：cut、grep</li><li style="list-style: none; display: inline"><ul><li>cut：取下各一行的匹配部分</li><li style="list-style: none; display: inline"><ul><li>基本语法1：cut -d '分隔符' -f fields</li><li style="list-style: none; display: inline"><ul><li>用于有分隔符的信息</li><li>-d：指定分隔字符，注意（' '）只能匹配单一空格不能匹配多个空格</li><li style="list-style: none; display: inline"><ul><li>cut在处理多空格数据比较吃力</li></ul></li><li>-f：将-d分隔的结果中的第fields段取出（从1记起），多个字段用逗号（,）隔开</li></ul></li><li>基本语法2：cut -c 字符范围a-b</li><li style="list-style: none; display: inline"><ul><li>用于排列整齐的信息</li><li>取出每一行的第a-b的信息，若从头取则省略a，若取到底则省略b</li></ul></li><li>如：</li><li style="list-style: none; display: inline"><ul><li>export | cut -c 12-</li><li>last | cut -d ' ' -f 1</li></ul></li></ul></li><li>grep：取下匹配的所有行</li><li style="list-style: none; display: inline"><ul><li>基本语法：grep [-acinv] [--color=auto] '查找字符串' filename</li><li style="list-style: none; display: inline"><ul><li>-a：将binary文件以text文件的方式查找</li><li>-c：计算找到的“查找字符串”的次数</li><li>-i：忽略大小写</li><li>-n：输出行号</li><li>-v：反向选择</li><li>--color=auto：将找到的关键词部分加上颜色显示</li></ul></li><li>如：</li><li style="list-style: none; display: inline"><ul><li>last | grep 'root'</li><li>last | grep 'root' | cut -d ' ' -f 1</li></ul></li></ul></li></ul></li><li>排序命令：sort、wc、uniq</li><li style="list-style: none; display: inline"><ul><li>sort：排序</li><li style="list-style: none; display: inline"><ul><li>基本语法：sort [-fbMnrtuk] [file or stdin]</li><li style="list-style: none; display: inline"><ul><li>-f：忽略大小写</li><li>-b：忽略最前面的空格部分</li><li>-M：以月份的名字来排序（JAN, DEC等）</li><li>-n：用纯数字来排序（默认根据字符，即'20'&lt;'3'）</li><li>-r：反向排序</li><li>-u：uniq，重复数据只出现一次</li><li>-t：分隔符，默认用[tab]</li><li>-k：以（分隔符）指定字段排序（从1记起）</li></ul></li><li>如：</li><li style="list-style: none; display: inline"><ul><li>cat /etc/passwd | sort -t ':' -k 3</li></ul></li></ul></li><li>uniq：重复数据仅显示一次</li><li style="list-style: none; display: inline"><ul><li>基础语法：uniq [-ic]</li><li style="list-style: none; display: inline"><ul><li>-i：忽略大小写</li><li>-c：进行计数</li></ul></li><li>如：</li><li style="list-style: none; display: inline"><ul><li>last | cut -d ' ' -f 1 | sort | uniq -c</li></ul></li></ul></li><li>wc：统计</li><li style="list-style: none; display: inline"><ul><li>基本语法：wc [-lwm]</li><li style="list-style: none; display: inline"><ul><li>不带参数：分别列出行数、字数、字符数</li><li>-l：仅列出行数</li><li>-w：仅列出字数</li><li>-m：仅列出多少字符</li></ul></li></ul></li></ul></li><li>双向重定向：tee</li><li style="list-style: none; display: inline"><ul><li>同时将数据流送到文件和屏幕</li><li>基本语法：tee [-a] file</li><li style="list-style: none; display: inline"><ul><li>-a：累加的方式（默认覆盖）</li></ul></li><li>如：</li><li style="list-style: none; display: inline"><ul><li>last | tee last.list | cut -d ' ' -f 1</li><li style="list-style: none; display: inline"><ul><li>将数据流存入last.list</li><li>将数据流通过管道cut处理后输出到屏幕</li></ul></li></ul></li></ul></li><li>字符转换命令：tr、col、join、paste、expand</li><li style="list-style: none; display: inline"><ul><li>tr：删除或替换部分文字</li><li style="list-style: none; display: inline"><ul><li>基本语法：tr [-ds] SET1 [SET2]</li><li style="list-style: none; display: inline"><ul><li>不带参数：用SET2取代SET1</li><li>-d：删除SET1</li><li>-s：替换掉重复的字符</li><li>可用正则表达式</li></ul></li><li>如：</li><li style="list-style: none; display: inline"><ul><li>last | tr '[a-z]' '[A-Z]'</li><li>cat /root/passwd | tr -d '\r' &gt; /root/passwd.linux</li><li style="list-style: none; display: inline"><ul><li>\r是tr命令中定义的特殊字符，代表DOS断行字符^M</li></ul></li></ul></li></ul></li><li>col：将tab转换为空格、去除转义字符（将man page转存为文本文件）</li><li style="list-style: none; display: inline"><ul><li>基本语法：col [-xb]</li><li style="list-style: none; display: inline"><ul><li>-x：将tab转换成对等的空格键</li><li>-b：在文字内有反斜杠（\）时，仅保留反斜杠最后接的那个字符（去除转义字符？）</li></ul></li><li>如：</li><li style="list-style: none; display: inline"><ul><li>man col | col -b &gt; /root/col.man</li></ul></li></ul></li><li>join：将两个文件中的相同数据的行拼在一起</li><li style="list-style: none; display: inline"><ul><li>基本语法：join [-ti12] file1 file2</li><li style="list-style: none; display: inline"><ul><li>-t：分隔符，拼起来的数据也用该分隔符隔开，默认为空格</li><li>-i：忽略大小写</li><li>-1：后接第几个字段，代表file1的分析字段</li><li>-2：后接第几个字段，代表file2的分析字段</li><li style="list-style: none; display: inline"><ul><li>默认-1 1 -2 1</li></ul></li></ul></li><li>如：</li><li style="list-style: none; display: inline"><ul><li>join -t ':' -1 4 /etc/passwd -2 3 /etc/group</li></ul></li><li>用join之前需要对文件进行排序（sort），否则可能略过某些数据</li></ul></li><li>paste：将两个文件的对应行直接贴在一起</li><li style="list-style: none; display: inline"><ul><li>基本语法：paste [-d] file1 file2 .......（可以多个文件）</li><li style="list-style: none; display: inline"><ul><li>-d：分隔符，默认[tab]</li><li>file1和file2可以写成-，代表stdin</li></ul></li></ul></li><li>expand：将tab转换为任意个数空格（可不对等）</li><li style="list-style: none; display: inline"><ul><li>基本语法：expand [-t] file</li><li style="list-style: none; display: inline"><ul><li>-t：后接数字，表示一个tab要用多少空格取代</li></ul></li></ul></li><li>unexpand：将指定数量的空格转换为tab</li></ul></li><li>切割命令：split</li><li style="list-style: none; display: inline"><ul><li>基本语法：split [-bl] file PREFIX</li><li style="list-style: none; display: inline"><ul><li>-b：按大小切割，后接单个文件大小，可加单位b,k,m等</li><li>-l：按行切割，后接行数</li><li>PREFIX：前导符，作为切割文件的前导文字</li><li style="list-style: none; display: inline"><ul><li>如PREFIX为xxx时</li><li>切割后文件会依次命名为xxxaa, xxxab, xxxac依次类推（这样至少可以表示26*26个文件）</li></ul></li></ul></li><li>合并切割文件</li><li style="list-style: none; display: inline"><ul><li>直接用数据流重定向即可</li><li>cat PREFIX* &gt;&gt; file</li></ul></li></ul></li><li>参数代换：xargs</li><li style="list-style: none; display: inline"><ul><li>常用于不支持管道命令的命令</li><li>读入stdin数据，以空格或断行符将数据分隔成command的arguments</li><li>基本语法：xargs [-Oepn] command</li><li style="list-style: none; display: inline"><ul><li>-O：将stdin中的特殊字符还原成一般字符</li><li>-e：后接终止字符串，当分析到该字符串时即停止工作，该字符串不会作为参数代入</li><li>-p：在执行每个命令参数时，会询问是否执行“.........”command</li><li>-n：后接个数，表示每次命令使用几个参数</li></ul></li><li>如：</li><li style="list-style: none; display: inline"><ul><li>find /sbin -perm +7000 | xargs ls -l</li></ul></li></ul></li><li>关于减号-</li><li style="list-style: none; display: inline"><ul><li>代表stdin或stdout</li><li>如：</li><li style="list-style: none; display: inline"><ul><li>tar -cvf - /home | tar -xvf -</li><li>将/home打包到-（stdout）</li><li>再将-（stdout）解压出来</li></ul></li></ul></li></ul></li></ul></div>
</div></a></body></html>\00
